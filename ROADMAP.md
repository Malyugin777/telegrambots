# NEXUS ROADMAP

## Ğ¢ĞµĞºÑƒÑ‰Ğ¸Ğ¹ ÑÑ‚Ğ°Ñ‚ÑƒÑ: Ğ¤Ğ°Ğ·Ğ° 7 Ğ’ Ğ ĞĞ‘ĞĞ¢Ğ• ğŸ”¥

**Ğ’ĞµÑ€ÑĞ¸Ñ:** 1.3.0
**ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½ĞµĞµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ:** 2026-01-20

### Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¾:
- [x] Ğ˜ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½ Ğ³Ñ€Ğ°Ñ„Ğ¸Ğº Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸ (Ğ²ĞºĞ»ÑÑ‡Ğ°ĞµÑ‚ ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ)
- [x] Ğ˜ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½ Ğ¿Ğ¾Ğ´ÑÑ‡Ñ‘Ñ‚ ÑĞ·ĞµÑ€Ğ¾Ğ² Ğ±Ğ¾Ñ‚Ğ°
- [x] Ğ˜ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½ Ğ¿Ğ°Ñ€ÑĞ¸Ğ½Ğ³ details Ğ² Ğ»Ğ¾Ğ³Ğ°Ñ…
- [x] Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ¿Ğ¾ Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ğ°Ğ¼ (Pie chart)
- [x] Drag & Drop Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹
- [x] ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ñ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒÑ
- [x] Ğ’ĞµÑ€ÑĞ¸Ñ Ğ² Ñ„ÑƒÑ‚ĞµÑ€Ğµ
- [x] Ğ˜ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½ aspect ratio Ğ²Ğ¸Ğ´ĞµĞ¾ (SAR fix)
- [x] **JSON Ğ¿Ğ°Ñ€ÑĞ¸Ğ½Ğ³ ffprobe (ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ±Ğ°Ğ³)** â€” v1.2.1
- [x] **Billing Tracker (Ğ¤Ğ°Ğ·Ğ° 3)** â€” ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ°Ğ¼Ğ¸
- [x] **Bot Messages Editor (Ğ¤Ğ°Ğ·Ğ° 5)** â€” Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ² Ğ±Ğ¾Ñ‚Ğ°
- [x] **Performance Monitor (Ğ¤Ğ°Ğ·Ğ° 6)** â€” Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸
- [x] **YouTube Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğµ Ğ²Ğ¸Ğ´ĞµĞ¾** â€” sendVideo Ğ´Ğ¾ 2GB (Local Bot API)
- [x] **Pinterest pin.it** â€” Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° ĞºĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¸Ñ… ÑÑÑ‹Ğ»Ğ¾Ğº
- [x] **YouTube 3-step fallback** â€” yt-dlp â†’ pytubefix â†’ RapidAPI
- [x] **A+ remux** â€” stream copy Ñ SAR metadata fix

### Ğ’ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğµ (Ğ¤Ğ°Ğ·Ğ° 7):
- [ ] Research Ğ°Ğ»ÑŒÑ‚ĞµÑ€Ğ½Ğ°Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ñ… API (SaveNow, Cobalt)
- [ ] Ops Dashboard Ğ´Ğ»Ñ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ğ° Ğ¿Ñ€Ğ¾Ğ²Ğ°Ğ¹Ğ´ĞµÑ€Ğ¾Ğ²
- [ ] Error classification (HARD-KILL vs STALL)
- [ ] Cooldown ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Ğ´Ğ»Ñ failed Ğ¿Ñ€Ğ¾Ğ²Ğ°Ğ¹Ğ´ĞµÑ€Ğ¾Ğ²
- [ ] Budget guardrails Ğ´Ğ»Ñ Ğ¿Ğ»Ğ°Ñ‚Ğ½Ñ‹Ñ… API
- [ ] Routing UI Ğ² Ğ°Ğ´Ğ¼Ğ¸Ğ½ĞºĞµ

---

## Ğ¤ĞĞ—Ğ 3: Ğ˜ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ²Ğ¸Ğ´ĞµĞ¾ + Ğ¡Ñ‡Ñ‘Ñ‚Ñ‡Ğ¸Ğº Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº

### 3.1 Ğ’Ğ¸Ğ´ĞµĞ¾ Aspect Ratio âœ… Ğ—ĞĞ’Ğ•Ğ Ğ¨Ğ•ĞĞ
- [x] ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° SAR Ñ‡ĞµÑ€ĞµĞ· ffprobe (JSON Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚)
- [x] Ğ•ÑĞ»Ğ¸ SAR=1:1 Ğ¸ H.264 â€” Ğ¿Ñ€Ğ¾Ğ¿ÑƒÑĞºĞ°ĞµĞ¼
- [x] Ğ•ÑĞ»Ğ¸ ĞºĞ¾Ğ´ĞµĞº Ğ½Ğµ H.264 â€” Ğ¿ĞµÑ€ĞµĞºĞ¾Ğ´Ğ¸Ñ€ÑƒĞµĞ¼ Ğ² H.264
- [x] Ğ•ÑĞ»Ğ¸ SARâ‰ 1:1 â€” scale Ñ ÑĞ²Ğ½Ñ‹Ğ¼ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚Ğ¾Ğ¼ Ğ¿Ğ¸ĞºÑĞµĞ»ĞµĞ¹
- [x] Ğ˜ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¾ Ğ² rapidapi_downloader.py Ğ¸ downloader.py
- [x] Ğ”ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ [FIX_VIDEO] / [FIX_TIKTOK]

### 3.2 Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº /errors âœ… Ğ—ĞĞ’Ğ•Ğ Ğ¨Ğ•ĞĞ
- [x] Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº Ñ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ğ¼Ğ¸
- [x] Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°: Ğ²ÑĞµĞ³Ğ¾, ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ, Ğ¿Ğ¾ Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ğ°Ğ¼
- [x] Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ ActionLog Ñ action='error'

---

## Ğ¤ĞĞ—Ğ 4: Billing Tracker (Ğ¢Ñ€ĞµĞºĞµÑ€ Ğ¾Ğ¿Ğ»Ğ°Ñ‚) âœ… Ğ—ĞĞ’Ğ•Ğ Ğ¨Ğ•ĞĞ

### Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° `subscriptions`:
```sql
CREATE TABLE subscriptions (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100),           -- "Aeza VPS", "RapidAPI", "Hostkey"
    provider_url VARCHAR(255),    -- Ğ¡ÑÑ‹Ğ»ĞºĞ° Ğ½Ğ° Ğ›Ğš
    amount DECIMAL(10,2),
    currency VARCHAR(3),          -- RUB, USD
    billing_cycle VARCHAR(20),    -- monthly, yearly
    next_payment_date DATE,
    auto_renew BOOLEAN,
    notes TEXT,
    created_at TIMESTAMP
);
```

### Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»:
- [x] CRUD Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞ¾Ğº Ñ‡ĞµÑ€ĞµĞ· Ğ°Ğ´Ğ¼Ğ¸Ğ½ĞºÑƒ
- [x] Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° /subscriptions Ğ² Ğ¼ĞµĞ½Ñ
- [x] Dashboard Ğ²Ğ¸Ğ´Ğ¶ĞµÑ‚ "Ğ‘Ğ»Ğ¸Ğ¶Ğ°Ğ¹ÑˆĞ¸Ğµ Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ¸"
- [x] Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶ĞµĞ¹

---

## Ğ¤ĞĞ—Ğ 5: Bot Customization (ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ğ±Ğ¾Ñ‚Ğ°) âœ… Ğ—ĞĞ’Ğ•Ğ Ğ¨Ğ•ĞĞ

### 5.1 Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¾Ñ€ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹
```
Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° bot_messages:
- id
- bot_id
- message_key (start, help, download_success, error, etc.)
- text_ru
- text_en
- is_active
- updated_at
```

### Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»:
- [x] Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° /bot-messages Ğ² Ğ°Ğ´Ğ¼Ğ¸Ğ½ĞºĞµ
- [x] Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¾Ñ€ Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ² Ñ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸ĞµĞ¼ Ğ² Ğ‘Ğ”
- [x] ĞĞ²Ñ‚Ğ¾-Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞºÑÑˆĞ° Ğ±Ğ¾Ñ‚Ğ° (60s TTL)
- [x] ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Ñ€ÑƒÑÑĞºĞ¾Ğ³Ğ¾ Ğ¸ Ğ°Ğ½Ğ³Ğ»Ğ¸Ğ¹ÑĞºĞ¾Ğ³Ğ¾ ÑĞ·Ñ‹ĞºĞ¾Ğ²
- [x] Ğ­Ğ¼Ğ¾Ğ´Ğ·Ğ¸ Ğ² ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸ÑÑ…

---

## Ğ¤ĞĞ—Ğ 6: Performance Monitor âœ… Ğ—ĞĞ’Ğ•Ğ Ğ¨Ğ•ĞĞ

### 6.1 ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸ ÑĞºĞ°Ñ‡Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ
```python
# Ğ’ ActionLog Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ñ‹ Ğ¿Ğ¾Ğ»Ñ:
- download_time_ms: int      # Ğ’Ñ€ĞµĞ¼Ñ ÑĞºĞ°Ñ‡Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ
- file_size_bytes: bigint    # Ğ Ğ°Ğ·Ğ¼ĞµÑ€ Ñ„Ğ°Ğ¹Ğ»Ğ°
- download_speed_kbps: int   # Ğ¡ĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ KB/s
```

### 6.2 Dashboard Ğ²Ğ¸Ğ´Ğ¶ĞµÑ‚Ñ‹:
- [x] Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ ÑĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ ÑĞºĞ°Ñ‡Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ
- [x] Ğ¡Ñ€ĞµĞ´Ğ½Ğ¸Ğ¹ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€ Ñ„Ğ°Ğ¹Ğ»Ğ°
- [x] Ğ¡Ñ€ĞµĞ´Ğ½ĞµĞµ Ğ²Ñ€ĞµĞ¼Ñ ÑĞºĞ°Ñ‡Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ
- [x] API endpoint GET /api/v1/stats/performance
- [x] ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸ Ğ¿Ğ¾ Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ğ°Ğ¼ (Instagram, TikTok, YouTube, Pinterest)

---

## Ğ¤ĞĞ—Ğ 7: YouTube Provider Routing System ğŸ”¥ Ğ¢Ğ•ĞšĞ£Ğ©Ğ˜Ğ™ ĞŸĞ Ğ˜ĞĞ Ğ˜Ğ¢Ğ•Ğ¢

**ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°:** YouTube Ğ±Ğ°Ğ½Ğ¸Ñ‚/Ñ‚Ñ€Ğ¾Ñ‚Ğ»Ğ¸Ñ‚ IP ÑĞµÑ€Ğ²ĞµÑ€Ğ°. yt-dlp, pytubefix Ğ¸ RapidAPI (ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ googlevideo.com URL) Ğ²ÑĞµ Ğ»Ğ¾Ğ¼Ğ°ÑÑ‚ÑÑ Ğ½Ğ° Ğ´Ğ»Ğ¸Ğ½Ğ½Ñ‹Ñ… Ğ²Ğ¸Ğ´ĞµĞ¾. ĞšĞ¾Ğ½ĞºÑƒÑ€ĞµĞ½Ñ‚Ñ‹ ĞºĞ°Ñ‡Ğ°ÑÑ‚ 8-Ñ‡Ğ°ÑĞ¾Ğ²Ñ‹Ğµ Ğ²Ğ¸Ğ´ĞµĞ¾ Ğ·Ğ° ÑĞµĞºÑƒĞ½Ğ´Ñ‹.

**SLA:** 2-5 Ğ¼Ğ¸Ğ½ÑƒÑ‚ Ğ¼Ğ°ĞºÑ Ğ¸Ğ»Ğ¸ Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ¾ÑˆĞ¸Ğ±ĞºÑƒ. 8+ Ğ¼Ğ¸Ğ½ÑƒÑ‚ Ğ½ĞµĞ´Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ğ¼Ğ¾.

**ĞšĞ»ÑÑ‡ĞµĞ²Ğ°Ñ Ğ¿Ğ¾Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ°:**
```python
MAX_USER_WAIT_SEC = 180  # 3 Ğ¼Ğ¸Ğ½ÑƒÑ‚Ñ‹ â€” Ğ¿Ğ¾ÑĞ»Ğµ ÑÑ‚Ğ¾Ğ³Ğ¾ Ğ»Ğ¸Ğ±Ğ¾ background queue, Ğ»Ğ¸Ğ±Ğ¾ Ğ¾Ñ‚ĞºĞ°Ğ·
```

---

### 7.0 Telemetry Baseline (Phase 0) âœ… Ğ§ĞĞ¡Ğ¢Ğ˜Ğ§ĞĞ

**Ğ¦ĞµĞ»ÑŒ:** Ğ¡Ğ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¸Ğ½ÑÑ‚Ğ¸Ñ Ñ€ĞµÑˆĞµĞ½Ğ¸Ğ¹, "ÑĞ¾ĞµĞ´Ğ¸Ğ½Ğ¸Ñ‚ÑŒ ĞšĞ»Ğ¾Ğ´Ğ° Ñ Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒÑ".

**Ğ£Ğ¶Ğµ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¾:**
- [x] `download_host` logging Ğ² RapidAPI (googlevideo.com = Ğ¿Ğ»Ğ¾Ñ…Ğ¾)
- [x] `download_time_ms`, `file_size_bytes`, `download_speed_kbps` Ğ² ActionLog

**ĞÑƒĞ¶Ğ½Ğ¾ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ:**
- [ ] `redirect_chain` â€” ĞµÑĞ»Ğ¸ API Ñ€ĞµĞ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¸Ñ‚ Ğ½Ğ° googlevideo
- [ ] `ttfb_ms` (time to first byte) â€” Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ latency Ğ¿Ñ€Ğ¾Ğ²Ğ°Ğ¹Ğ´ĞµÑ€Ğ°
- [ ] `error_type` Ğ² ActionLog (HARD_KILL / STALL / PROVIDER_BUG)
- [ ] `duration_bucket` (shorts/medium/long) Ğ´Ğ»Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ¸

---

### 7.1 Research APIs (Phase 1)

**Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ°:** ĞĞ°Ğ¹Ñ‚Ğ¸ API ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ Ğ Ğ•ĞĞ›Ğ¬ĞĞ Ğ¿Ñ€Ğ¾ĞºÑĞ¸Ñ€ÑƒÑÑ‚ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚ Ñ‡ĞµÑ€ĞµĞ· ÑĞ²Ğ¾Ğ¹ CDN, Ğ° Ğ½Ğµ Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ÑÑ‚ googlevideo.com URLs.

| API | Ğ¢Ğ¸Ğ¿ | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ | ĞŸÑ€Ğ¸Ğ¼ĞµÑ‡Ğ°Ğ½Ğ¸Ñ |
|-----|-----|--------|------------|
| **SaveNow** | Proxy CDN | ğŸ” Research | Ğ”Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ¿Ñ€Ğ¾ĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ‡ĞµÑ€ĞµĞ· ÑĞ²Ğ¾Ğ¹ CDN |
| **Cobalt.tools** | Proxy CDN | ğŸ” Research | Open source, self-hosted Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚ |
| **y2mate API** | Unknown | ğŸ” Research | ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ ÑÑ…ĞµĞ¼Ñƒ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ |
| **SaveFrom** | Unknown | ğŸ” Research | ĞŸĞ¾Ğ¿ÑƒĞ»ÑÑ€Ğ½Ñ‹Ğ¹ ÑĞµÑ€Ğ²Ğ¸Ñ |

**ĞšÑ€Ğ¸Ñ‚ĞµÑ€Ğ¸Ğ¸ Ğ¾Ñ†ĞµĞ½ĞºĞ¸:**
- [ ] ĞŸÑ€Ğ¾ĞºÑĞ¸Ñ€ÑƒĞµÑ‚ Ñ‡ĞµÑ€ĞµĞ· ÑĞ²Ğ¾Ğ¹ CDN (ĞĞ• googlevideo.com)
- [ ] Ğ¡ĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ ÑĞºĞ°Ñ‡Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ >5 MB/s
- [ ] ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ´Ğ»Ğ¸Ğ½Ğ½Ñ‹Ñ… Ğ²Ğ¸Ğ´ĞµĞ¾ (>60 Ğ¼Ğ¸Ğ½)
- [ ] Ğ¦ĞµĞ½Ğ°/Ğ»Ğ¸Ğ¼Ğ¸Ñ‚Ñ‹
- [ ] ĞĞ°Ğ´Ñ‘Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ (uptime)

**Ğ”Ğ¸Ğ°Ğ³Ğ½Ğ¾ÑÑ‚Ğ¸ĞºĞ° (Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ¿Ñ€Ğ¾Ğ²Ğ°Ğ¹Ğ´ĞµÑ€Ğ°):**
```python
# Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ¿Ñ€Ğ¾Ğ²Ğ°Ğ¹Ğ´ĞµÑ€Ğ°:
- download_host (googlevideo.com = Ğ¿Ğ»Ğ¾Ñ…Ğ¾, cdn.* = Ñ…Ğ¾Ñ€Ğ¾ÑˆĞ¾)
- redirect chain (ĞµÑĞ»Ğ¸ Ğ¿ĞµÑ€ĞµĞ½Ğ°Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ½Ğ° googlevideo)
- download_speed_kbps
- time_to_first_byte
```

---

### 7.2 Routing Engine Backend (Phase 2)

**ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾Ğ²Ğ°Ğ¹Ğ´ĞµÑ€Ğ¾Ğ²:**

```python
# Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° download_providers
CREATE TABLE download_providers (
    id SERIAL PRIMARY KEY,
    name VARCHAR(50),           -- "yt-dlp", "pytubefix", "rapidapi", "savenow", "cobalt"
    provider_type VARCHAR(20),  -- "local", "api", "egress_pool"
    is_active BOOLEAN,
    priority INT,               -- 1 = highest

    -- Ğ”Ğ»Ñ API Ğ¿Ñ€Ğ¾Ğ²Ğ°Ğ¹Ğ´ĞµÑ€Ğ¾Ğ²
    api_key VARCHAR(255),
    api_host VARCHAR(255),
    rate_limit_per_min INT,

    -- Health tracking
    health_status VARCHAR(20),  -- "healthy", "degraded", "down"
    last_success_at TIMESTAMP,
    last_error_at TIMESTAMP,
    error_count_1h INT,
    success_rate_24h DECIMAL,
    avg_speed_kbps INT,

    -- Cooldown
    cooldown_until TIMESTAMP,   -- NULL = active, datetime = disabled until

    -- Budget (Ğ´Ğ»Ñ Ğ¿Ğ»Ğ°Ñ‚Ğ½Ñ‹Ñ… API)
    daily_budget_usd DECIMAL,
    daily_spent_usd DECIMAL,
    budget_reset_at TIMESTAMP,

    created_at TIMESTAMP
);

# Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° routing_rules
CREATE TABLE routing_rules (
    id SERIAL PRIMARY KEY,
    platform VARCHAR(20),       -- "youtube", "youtube_shorts", "tiktok", etc
    duration_min INT,           -- NULL = any, 0 = shorts, 300 = >5min
    duration_max INT,           -- NULL = any
    file_size_max_mb INT,

    provider_chain JSONB,       -- ["yt-dlp", "pytubefix", "rapidapi", "savenow"]

    is_active BOOLEAN,
    priority INT,
    created_at TIMESTAMP
);
```

**Error Classification:**
```python
# HARD-KILL errors (Ğ¼Ğ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ fallback + cooldown 15-60 Ğ¼Ğ¸Ğ½)
HARD_KILL_ERRORS = [
    "SSL: UNEXPECTED_EOF",      # YouTube ban
    "HTTP 403 Forbidden",       # IP blocked
    "HTTP 429 Too Many",        # Rate limited
    "Sign in to confirm",       # Age/auth required
]

# STALL errors (retry once, then fallback)
STALL_ERRORS = [
    "Download stalled",         # No progress >30 sec
    "Connection timeout",       # Network issue
    "Incomplete read",          # Partial download
]
```

**Cooldown Logic (per provider:platform:bucket):**
```python
# Cooldown key = {provider}:{platform}:{bucket}
# ĞŸÑ€Ğ¸Ğ¼ĞµÑ€: "yt-dlp:youtube:long" â€” yt-dlp Ğ´Ğ¾Ñ…Ğ½ĞµÑ‚ Ğ½Ğ° Ğ´Ğ»Ğ¸Ğ½Ğ½Ñ‹Ñ…, Ğ½Ğ¾ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ğ½Ğ° shorts
# bucket = "shorts" (<5 min) | "medium" (5-30 min) | "long" (>30 min)

async def on_provider_error(provider: str, platform: str, duration_sec: int, error_type: str):
    bucket = get_duration_bucket(duration_sec)  # shorts/medium/long
    cooldown_key = f"{provider}:{platform}:{bucket}"

    if error_type == "HARD_KILL":
        # ĞœĞ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ğ¾ Ğ¾Ñ‚ĞºĞ»ÑÑ‡Ğ°ĞµĞ¼ Ğ½Ğ° 30 Ğ¼Ğ¸Ğ½ (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ»Ñ ÑÑ‚Ğ¾Ğ³Ğ¾ bucket!)
        await set_cooldown(cooldown_key, minutes=30)
    elif error_type == "STALL":
        # Ğ£Ğ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ğ²Ğ°ĞµĞ¼ cooldown ÑĞºÑĞ¿Ğ¾Ğ½ĞµĞ½Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ¾
        current = await get_error_count_1h(cooldown_key)
        if current >= 3:
            await set_cooldown(cooldown_key, minutes=15)

def get_duration_bucket(duration_sec: int) -> str:
    if duration_sec < 300: return "shorts"      # <5 min
    if duration_sec < 1800: return "medium"     # 5-30 min
    return "long"                                # >30 min
```

**Budget Guardrails (Ğ¿Ğ»Ğ°Ñ‚Ğ½Ñ‹Ğµ API):**
```python
async def check_budget(provider_id: str) -> bool:
    provider = await get_provider(provider_id)
    if provider.daily_spent_usd >= provider.daily_budget_usd:
        logger.warning(f"[ROUTING] {provider.name} budget exceeded, skipping")
        return False
    return True

async def track_api_cost(provider_id: str, cost_usd: float):
    await increment_daily_spent(provider_id, cost_usd)
```

**Egress Pool (multi-IP):**
```python
# ĞŸÑ€Ğ¾Ğ²Ğ°Ğ¹Ğ´ĞµÑ€ Ñ‚Ğ¸Ğ¿Ğ° "egress_pool" Ğ´Ğ»Ñ multi-IP ÑĞºĞ°Ñ‡Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ
# ĞŸÑ€Ğ¸Ğ¼ĞµÑ€: Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ VPS Ğ¸Ğ»Ğ¸ Ğ¿Ñ€Ğ¾ĞºÑĞ¸ Ğ´Ğ»Ñ yt-dlp
class EgressPoolProvider:
    def __init__(self, endpoints: list[str]):
        # ["vps1.example.com", "vps2.example.com", ...]
        self.endpoints = endpoints
        self.current_index = 0

    async def download(self, url: str) -> DownloadResult:
        # Round-robin Ğ¸Ğ»Ğ¸ Ğ²Ñ‹Ğ±Ğ¾Ñ€ Ğ¿Ğ¾ Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒÑ
        endpoint = self.get_healthy_endpoint()
        return await self.download_via_endpoint(endpoint, url)
```

**Concurrency Manager (Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ğ¾-ÑĞ¿ĞµÑ†Ğ¸Ñ„Ğ¸Ñ‡Ğ½Ñ‹Ğ¹):**
```python
# Redis-based concurrency limits
# Ğ’ĞĞ–ĞĞ: YouTube Ğ±Ğ°Ğ½Ğ¸Ñ‚ Ğ±Ñ‹ÑÑ‚Ñ€ĞµĞµ Ğ¿Ñ€Ğ¸ Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ñ‹Ñ… Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°Ñ…!
CONCURRENCY_LIMITS = {
    # YouTube â€” Ğ°Ğ³Ñ€ĞµÑÑĞ¸Ğ²Ğ½Ñ‹Ğ¹ IP Ğ±Ğ°Ğ½, Ğ´ĞµÑ€Ğ¶Ğ¸Ğ¼ Ğ½Ğ¸Ğ·ĞºĞ¾
    "youtube:yt-dlp": 2,        # Max 2 concurrent yt-dlp YouTube
    "youtube:pytubefix": 2,     # Max 2 concurrent pytubefix
    "youtube:rapidapi": 3,      # RapidAPI Ñ‡ÑƒÑ‚ÑŒ Ğ±Ğ¾Ğ»ÑŒÑˆĞµ (Ğ¸Ñ… IP)

    # Ğ”Ñ€ÑƒĞ³Ğ¸Ğµ Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ñ‹ â€” Ğ±Ğ¾Ğ»ĞµĞµ Ğ»Ğ¾ÑĞ»ÑŒĞ½Ñ‹Ğµ
    "instagram:rapidapi": 5,    # Instagram Ñ‡ĞµÑ€ĞµĞ· RapidAPI
    "tiktok:yt-dlp": 5,         # TikTok Ğ±Ğ¾Ğ»ĞµĞµ Ğ»Ğ¾ÑĞ»ĞµĞ½
    "pinterest:yt-dlp": 5,      # Pinterest Ñ‚Ğ¾Ğ¶Ğµ

    # ĞĞ±Ñ‰Ğ¸Ğµ Ğ»Ğ¸Ğ¼Ğ¸Ñ‚Ñ‹
    "telegram_upload": 10,      # Max 10 concurrent uploads
    "ffmpeg_process": 3,        # Max 3 concurrent ffmpeg
}

async def acquire_slot(category: str, timeout: int = 60) -> bool:
    key = f"concurrency:{category}"
    current = await redis.incr(key)
    if current > CONCURRENCY_LIMITS.get(category, 10):
        await redis.decr(key)
        return False
    await redis.expire(key, timeout)
    return True
```

---

### 7.3 Admin Panel UI (Phase 3)

**ĞŸĞ¾Ñ€ÑĞ´Ğ¾Ğº Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ (Ğ½Ğ°Ñ‡Ğ¸Ğ½Ğ°ĞµĞ¼ Ñ Ops Dashboard):**

#### 7.3.1 Ops Dashboard (ĞŸĞ•Ğ Ğ’Ğ«Ğ™ ĞŸĞ Ğ˜ĞĞ Ğ˜Ğ¢Ğ•Ğ¢)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ›ï¸ Operations Dashboard                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€ Provider Health â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ yt-dlp      ğŸŸ¢ Healthy   Speed: 5.2 MB/s   Err: 2%    â”‚  â”‚
â”‚ â”‚ pytubefix   ğŸŸ¡ Degraded  Speed: 3.1 MB/s   Err: 15%   â”‚  â”‚
â”‚ â”‚ RapidAPI    ğŸ”´ Down      Cooldown: 28 min  Err: 89%   â”‚  â”‚
â”‚ â”‚ SaveNow     ğŸŸ¢ Healthy   Speed: 8.4 MB/s   Err: 1%    â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€ Real-time Metrics â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ Downloads/hour: 847     Success rate: 94%             â”‚  â”‚
â”‚ â”‚ Avg speed: 4.8 MB/s     Avg time: 12.3s               â”‚  â”‚
â”‚ â”‚ YouTube errors: 23      Budget used: $4.20/$10        â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€ Active Cooldowns â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ RapidAPI: SSL_EOF (28 min left)                       â”‚  â”‚
â”‚ â”‚ yt-dlp:youtube_long: STALL (12 min left)             â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€ Recent Errors â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ 14:23  YouTube  RapidAPI  SSL_UNEXPECTED_EOF          â”‚  â”‚
â”‚ â”‚ 14:21  YouTube  yt-dlp    Download stalled            â”‚  â”‚
â”‚ â”‚ 14:18  TikTok   yt-dlp    Rate limited                â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 7.3.2 Alerts System
```python
# ĞĞ»ĞµÑ€Ñ‚Ñ‹ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑÑÑ‚ÑÑ Ğ² Telegram Ğ°Ğ´Ğ¼Ğ¸Ğ½Ñƒ
ALERT_RULES = {
    "provider_down": {
        "condition": "error_rate_1h > 50%",
        "cooldown": "15 min",
        "message": "ğŸ”´ {provider} down: {error_rate}% errors"
    },
    "budget_warning": {
        "condition": "daily_spent > 80% of budget",
        "cooldown": "1 hour",
        "message": "ğŸ’° {provider} budget warning: ${spent}/${budget}"
    },
    "all_providers_down": {
        "condition": "all providers for platform in cooldown",
        "cooldown": "5 min",
        "message": "ğŸš¨ CRITICAL: No working providers for {platform}"
    }
}
```

#### 7.3.3 Routing UI (Ğ’Ğ¢ĞĞ ĞĞ™ ĞŸĞ Ğ˜ĞĞ Ğ˜Ğ¢Ğ•Ğ¢)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”€ Download Routing Rules                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ Platform: [YouTube â–¼]  Duration: [Any â–¼]                    â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€ Provider Chain (drag to reorder) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ 1. â¬› yt-dlp          [ğŸŸ¢ Active] [âš™ï¸ Config]         â”‚  â”‚
â”‚ â”‚ 2. â¬› pytubefix       [ğŸŸ¢ Active] [âš™ï¸ Config]         â”‚  â”‚
â”‚ â”‚ 3. â¬› SaveNow API     [ğŸŸ¢ Active] [âš™ï¸ Config]         â”‚  â”‚
â”‚ â”‚ 4. â¬› RapidAPI        [ğŸŸ¡ Budget] [âš™ï¸ Config]         â”‚  â”‚
â”‚ â”‚                                                        â”‚  â”‚
â”‚ â”‚ [+ Add Provider]                                       â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€ Rule Settings â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ Duration min: [    ] sec   Duration max: [    ] sec   â”‚  â”‚
â”‚ â”‚ Max file size: [2000] MB   Priority: [1]              â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚ [Save Rule] [Test Rule] [Delete]                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 7.3.4 Provider Management
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš™ï¸ Provider: SaveNow API                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ Type: [API â–¼]  Status: [ğŸŸ¢ Active â–¼]                        â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€ API Configuration â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ API Key: [sk-xxxxxxxxxxxxxxxx]                        â”‚  â”‚
â”‚ â”‚ API Host: [api.savenow.io]                            â”‚  â”‚
â”‚ â”‚ Rate Limit: [60] req/min                              â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€ Budget â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ Daily Budget: [$10.00]    Spent Today: $4.20          â”‚  â”‚
â”‚ â”‚ [x] Auto-disable when budget exceeded                 â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€ Health (24h) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ Success Rate: 98.5%       Avg Speed: 8.4 MB/s         â”‚  â”‚
â”‚ â”‚ Total Downloads: 1,247    Errors: 19                  â”‚  â”‚
â”‚ â”‚ [ğŸ“Š View detailed stats]                              â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”‚ [Save] [Test Connection] [View Logs]                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 7.4 Testing & Optimization (Phase 4)

**Ğ¢ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ğµ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¸:**
- [ ] Short video (<5 min) - Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ ĞºĞ°Ñ‡Ğ°Ñ‚ÑŒÑÑ Ğ·Ğ° <10 ÑĞµĞº
- [ ] Medium video (5-30 min) - Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ ĞºĞ°Ñ‡Ğ°Ñ‚ÑŒÑÑ Ğ·Ğ° <2 Ğ¼Ğ¸Ğ½
- [ ] Long video (30-60 min) - Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ ĞºĞ°Ñ‡Ğ°Ñ‚ÑŒÑÑ Ğ·Ğ° <5 Ğ¼Ğ¸Ğ½ Ğ¸Ğ»Ğ¸ Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ¾ÑˆĞ¸Ğ±ĞºÑƒ
- [ ] Very long video (>60 min) - fallback chain Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ¾Ñ‚Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°Ñ‚ÑŒ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾

**ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸ ÑƒÑĞ¿ĞµÑ…Ğ°:**
- Success rate >95% Ğ´Ğ»Ñ ĞºĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¸Ñ… Ğ²Ğ¸Ğ´ĞµĞ¾
- Success rate >85% Ğ´Ğ»Ñ Ğ´Ğ»Ğ¸Ğ½Ğ½Ñ‹Ñ… Ğ²Ğ¸Ğ´ĞµĞ¾
- Ğ¡Ñ€ĞµĞ´Ğ½ĞµĞµ Ğ²Ñ€ĞµĞ¼Ñ fallback <5 ÑĞµĞº
- ĞĞ»ĞµÑ€Ñ‚Ñ‹ Ğ¿Ñ€Ğ¸Ñ…Ğ¾Ğ´ÑÑ‚ Ğ² Ñ‚ĞµÑ‡ĞµĞ½Ğ¸Ğµ 1 Ğ¼Ğ¸Ğ½ Ğ¿Ğ¾ÑĞ»Ğµ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹

---

### 7.5 VPS Scaling

**Ğ¢ĞµĞºÑƒÑ‰Ğ¸Ğ¹ VPS (Hostkey):**
- 2 vCore, 2GB RAM, 3TB traffic
- ĞĞµĞ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ Ğ´Ğ»Ñ 10K+ users/day

**Ğ¢Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ´Ğ»Ñ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:**
- Traffic: 20-30TB/month Ğ¼Ğ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼
- RAM: 4-8GB Ğ´Ğ»Ñ concurrent downloads
- CPU: 4+ cores Ğ´Ğ»Ñ ffmpeg
- Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾: Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ VPS Ğ´Ğ»Ñ egress pool

---

## Ğ¤ĞĞ—Ğ 8: Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹ Ğ½Ğ° Hostkey

### Ğ¢ĞµĞºÑƒÑ‰Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°:
```
HOSTKEY (66.151.33.167)          AEZA (185.96.80.254)
â”œâ”€â”€ PostgreSQL :5432              â”œâ”€â”€ API (FastAPI) :8000
â”œâ”€â”€ Redis :6379                   â”œâ”€â”€ Frontend (shadow-api.ru)
â””â”€â”€ bot_manager                   â””â”€â”€ Nginx + SSL
    â””â”€â”€ @SaveNinja_bot
```

### Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸:
- [ ] ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¹ Ñ‡ĞµÑ€ĞµĞ· GitHub Actions
- [ ] ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¾Ğ²
- [ ] Ğ›Ğ¾Ğ³Ğ¸ Ğ² Ñ†ĞµĞ½Ñ‚Ñ€Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğµ Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ

---

## Ğ¤ĞĞ—Ğ 9: VPN Bot (ĞĞ¾Ğ²Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚)

### ĞšĞ¾Ğ½Ñ†ĞµĞ¿Ñ†Ğ¸Ñ:
- Telegram Ğ±Ğ¾Ñ‚ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶Ğ¸ VPN
- Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ Outline/WireGuard
- ĞĞ¿Ğ»Ğ°Ñ‚Ğ° Ñ‡ĞµÑ€ĞµĞ· Telegram Stars / ĞºÑ€Ğ¸Ğ¿Ñ‚Ğ¾Ğ¹

### Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸:
- [ ] ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°
- [ ] Ğ’Ñ‹Ğ±Ğ¾Ñ€ VPN Ğ¿Ñ€Ğ¾Ñ‚Ğ¾ĞºĞ¾Ğ»Ğ°
- [ ] Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñ‹
- [ ] ĞĞ´Ğ¼Ğ¸Ğ½ĞºĞ° Ğ´Ğ»Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ ĞºĞ»ÑÑ‡Ğ°Ğ¼Ğ¸

---

## ĞŸĞ Ğ˜ĞĞ Ğ˜Ğ¢Ğ•Ğ¢Ğ«

| ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ | Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° | Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ |
|-----------|--------|-----------|--------|
| ~~1~~ | ~~Ğ¤Ğ°Ğ·Ğ° 3: Ğ’Ğ¸Ğ´ĞµĞ¾ SAR + ĞÑˆĞ¸Ğ±ĞºĞ¸~~ | ~~Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ~~ | âœ… Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾ |
| ~~2~~ | ~~Ğ¤Ğ°Ğ·Ğ° 4: Billing Tracker~~ | ~~Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ~~ | âœ… Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾ |
| ~~3~~ | ~~Ğ¤Ğ°Ğ·Ğ° 5: Bot Messages Editor~~ | ~~Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ~~ | âœ… Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾ |
| ~~4~~ | ~~Ğ¤Ğ°Ğ·Ğ° 6: Performance Monitor~~ | ~~Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ~~ | âœ… Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾ |
| ~~5~~ | ~~YouTube Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğµ Ğ²Ğ¸Ğ´ĞµĞ¾~~ | ~~ĞĞ¸Ğ·ĞºĞ°Ñ~~ | âœ… Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾ |
| **1** | **Ğ¤Ğ°Ğ·Ğ° 7: YouTube Provider Routing** | **Ğ’Ñ‹ÑĞ¾ĞºĞ°Ñ** | ğŸ”¥ Ğ’ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğµ |
| 2 | Ğ¤Ğ°Ğ·Ğ° 8: GitHub Actions CI/CD | Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ | Ğ§Ğ°ÑÑ‚Ğ¸Ñ‡Ğ½Ğ¾ |
| 3 | Ğ¤Ğ°Ğ·Ğ° 9: VPN Bot | Ğ’Ñ‹ÑĞ¾ĞºĞ°Ñ | ĞÑ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚ |

---

## ĞŸĞ ĞĞ’Ğ˜Ğ›Ğ Ğ ĞĞ‘ĞĞ¢Ğ« Ğ¡ CLAUDE CODE

### Ğ¡ĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ:
```
Ğ›ĞĞšĞĞ›Ğ¬ĞĞ: Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ, npm build, Ñ‚ĞµÑÑ‚Ñ‹
Ğ¡Ğ•Ğ Ğ’Ğ•Ğ : Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´ĞµĞ¿Ğ»Ğ¾Ğ¹ (scp, git pull, docker restart)
```

### Ğ­Ñ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ñ‹:
```
âœ… "Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ¹ Ğ›ĞĞšĞĞ›Ğ¬ĞĞ Ğ² C:\Projects\TelegramBots"
âœ… "ĞŸĞ¾ĞºĞ°Ğ¶Ğ¸ Ğ¿Ğ»Ğ°Ğ½, Ğ¿Ğ¾Ñ‚Ğ¾Ğ¼ Ğ´ĞµĞ»Ğ°Ğ¹"
âœ… "ĞĞ• Ğ´ĞµĞ»Ğ°Ğ¹ npm install Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€Ğµ"
âœ… ĞœĞ°Ğ»ĞµĞ½ÑŒĞºĞ¸Ğµ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸ Ğ²Ğ¼ĞµÑÑ‚Ğ¾ "ÑĞ´ĞµĞ»Ğ°Ğ¹ Ğ²ÑÑ‘"

âŒ Ğ”Ğ»Ğ¸Ğ½Ğ½Ñ‹Ğµ ÑĞµÑÑĞ¸Ğ¸ (ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚ Ñ‚ĞµÑ€ÑĞµÑ‚ÑÑ)
âŒ Ğ¡Ğ±Ğ¾Ñ€ĞºĞ° Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€Ğµ Ñ 1 ÑĞ´Ñ€Ğ¾Ğ¼
```

### Ğ¡ÑƒĞ±Ğ°Ğ³ĞµĞ½Ñ‚Ñ‹:
Ğ­Ñ‚Ğ¾ Ğ½Ğ¾Ñ€Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾ â€” Claude Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸ Ğ´Ğ»Ñ Ñ‡Ñ‚ĞµĞ½Ğ¸Ñ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ².
Ğ£ÑĞºĞ¾Ñ€ÑĞµÑ‚ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñƒ Ğ¿Ñ€Ğ¸ Ğ¸ÑÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¸ ĞºĞ¾Ğ´Ğ¾Ğ²Ğ¾Ğ¹ Ğ±Ğ°Ğ·Ñ‹.

### Ğ¢Ğ¾ĞºĞµĞ½Ñ‹:
ĞŸĞ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ÑÑ‚ÑÑ Ğ² ĞºĞ¾Ğ½Ñ†Ğµ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸. Ğ•ÑĞ»Ğ¸ Ğ¿Ñ€ĞµÑ€Ğ²Ğ°Ğ» â€” Ğ½Ğµ Ğ¿Ğ¾ĞºĞ°Ğ¶ĞµÑ‚.
